## Визуализация в plotly на языке R
Визуализация графиков на plotly R с переносом их в кастомные графики для Power BI

### Инструкция по переносу на свой ПК
1. Перенесите репозиторий себе на локальную машину c помощью git (HTTPS)

git clone https://github.com/lnetw/plotly_r.git

2. Как именно использовать кастомные графики для PBI можно почитать [здесь](https://towardsdatascience.com/interactive-power-bi-custom-visuals-with-r-a6a4ac998710)

3. В проекте есть 2 вида графиков написанных на языке R (multiplay все измерения на одном графике, и subplot для каждого измерения свой график)
### Список доступных файлов

1. **multiplay** - папка содержащая в себе данные для компиляции виджета графика на мульти осях в **PBI** и саму визуализацию в папке **dist**.
2. **subplot** - папка содержащая в себе данные для компиляции виджета графика на саб плотах в **PBI** и саму визуализацию  в папке **dist**.

### Замученные опечетки
1. Здесь в отличие от **Python** объект **subplot** в **plotly** явдяется не итерируемым, то есть необходимо сначала собрать все графики в список, а потом с его помощью инициализировать объект **subplot**.
2. При публикации отчета все типы данных, приходящие на вход меняются на **formula** (но это не точно), поэтому при осуществлении фильтрации необходимо исполльзовать функцию filter по типу:
''' df_target <- df_source %>%  filter(parametr %in% x)'''
3. Так же из 3 пункта выходит то, что при любом взаимодейтсвии с точными типами данных (например нужно найти минимум по дате), необходиом заранее обявлять их как этот тип данных (например '''as.Date(x)''').
4. При построении графика на R **plotly** почему-то все точки были пермешаны между собой, так что лучше фильтровать по времени тот набор данных, которые хочешь отображать на графике например:
'''df <- df[order(df%time),]'''
5. Очень внимательно стоит смотреть сообщения об ошибке, если что-то не работает, иногда вылетают стандартные библиотеки и их необходимо объявлять вначале вручную.